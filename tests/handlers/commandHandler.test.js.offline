// Assuming the oaiCommand is located at src/commands/inline/oaiCommand.js
// Update the relative path based on the actual location of commandHandler.test.js within your project

const { commandHandler } = require('../../src/handlers/commandHandler');
const oaiCommand = require('../../src/commands/inline/oaiCommand');

jest.spyOn(oaiCommand, 'execute').mockResolvedValue(true);

jest.mock('../../src/commands/inline/oai', () => ({
  execute: jest.fn().mockResolvedValue(true),
}));

describe('commandHandler Tests', () => {
  let mockMessage;

  beforeEach(() => {
    mockMessage = {
      content: '',
      reply: jest.fn().mockResolvedValue(null),
      author: { bot: false },
      channel: { send: jest.fn().mockResolvedValue(null) },
    };
  });

  it('executes oai command successfully', async () => {
    mockMessage.content = '!oai test query';
    await commandHandler(mockMessage);
    expect(oaiCommand.execute).toHaveBeenCalledWith(expect.anything(), expect.anything(), expect.anything());
  });

  afterEach(() => {
    jest.clearAllMocks();
  });
});
